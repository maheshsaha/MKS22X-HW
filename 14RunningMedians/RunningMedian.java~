public class RunningMedian{

    MyHeap max;
    MyHeap min;

    int maxSize;
    int minSize;
    
    public RunningMedian(){
	max = new MyHeap(true);
	min = new MyHeap(false);
	int maxSize = max.size;
	int minSize = min.size;
    }

    public void add(int a){
	if (maxSize == 0 || a < max.peek())
	    max.add(a);
	else
	    min.add(a);
	if (maxSize > 1 + minSize)
	    min.add(max.remove());
	else if (minSize > 1 + maxSize)
	    max.add(min.remove());
    }
    

    public double getMedian(){
	if (maxSize == minSize)
	    return 1.0 * ((max.peek() + min.peek()) / 2);
	else if (maxSize > minSize)
	    return 1.0 * max.peek();
	else
	    return 1.0 * min.peek();
    }
}
